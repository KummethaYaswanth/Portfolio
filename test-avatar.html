<!DOCTYPE html>
<html>
<head>
    <title>Avatar Test</title>
    <style>
        body { padding: 20px; font-family: Arial, sans-serif; }
        .test-img { max-width: 200px; border: 2px solid red; margin: 10px 0; }
        .success { border-color: green; }
        .fail { border-color: red; }
    </style>
</head>
<body>
    <h1>Avatar Image Test</h1>
    
    <h2>Direct Image Load:</h2>
    <img id="direct-img" src="images/profile/portrait.jpg" alt="Direct Load" class="test-img">
    
    <h2>JavaScript Image Load:</h2>
    <img id="js-img" class="test-img" style="display: none;">
    <div id="js-result">Loading...</div>
    
    <h2>Config Path Test:</h2>
    <div id="config-result">Loading config...</div>
    
    <script>
        // Test 1: Direct image load events
        const directImg = document.getElementById('direct-img');
        directImg.onload = () => {
            console.log('✅ Direct image loaded');
            directImg.classList.add('success');
        };
        directImg.onerror = () => {
            console.log('❌ Direct image failed');
            directImg.classList.add('fail');
        };
        
        // Test 2: JavaScript programmatic load
        function testJSLoad() {
            const jsImg = document.getElementById('js-img');
            const jsResult = document.getElementById('js-result');
            
            const testImg = new Image();
            testImg.onload = () => {
                console.log('✅ JS image loaded');
                jsImg.src = 'images/profile/portrait.jpg';
                jsImg.style.display = 'block';
                jsImg.classList.add('success');
                jsResult.textContent = '✅ JavaScript load successful';
                jsResult.style.color = 'green';
            };
            testImg.onerror = (error) => {
                console.log('❌ JS image failed', error);
                jsResult.textContent = '❌ JavaScript load failed: ' + error;
                jsResult.style.color = 'red';
            };
            testImg.src = 'images/profile/portrait.jpg';
        }
        
        // Test 3: Config.json path test
        async function testConfigPath() {
            const configResult = document.getElementById('config-result');
            try {
                const response = await fetch('config.json');
                const data = await response.json();
                console.log('Config avatar path:', data.avatar);
                configResult.innerHTML = `Config avatar path: <strong>${data.avatar}</strong>`;
                
                // Test the exact config path
                const configImg = new Image();
                configImg.onload = () => {
                    configResult.innerHTML += '<br>✅ Config path works!';
                    configResult.style.color = 'green';
                };
                configImg.onerror = () => {
                    configResult.innerHTML += '<br>❌ Config path fails!';
                    configResult.style.color = 'red';
                };
                configImg.src = data.avatar;
            } catch (error) {
                configResult.textContent = '❌ Config load failed: ' + error;
                configResult.style.color = 'red';
            }
        }
        
        // Run tests
        window.onload = () => {
            testJSLoad();
            testConfigPath();
        };
    </script>
</body>
</html> 